<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy New Year üíñ</title>

<style>
/* ================= THEME ================= */
:root{
  --bg1:#ffe4ec;
  --bg2:#fff1f5;
  --accent:#ff6f91;
  --box-bg:rgba(255,255,255,0.35);
  --text:#ffffff;
}

body.night{
  --bg1:#0f1026;
  --bg2:#1b1d3c;
  --accent:#ff8fb1;
  --box-bg:rgba(0,0,0,0.45);
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Segoe UI',sans-serif;
}

body{
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  color:var(--text);
  overflow-x:hidden;
  transition:background 1.5s ease;
}

/* ================= STARS ================= */
#stars{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
}

.star{
  position:absolute;
  width:2px;
  height:2px;
  background:white;
  border-radius:50%;
  opacity:0.3;
  animation:blinkStar ease-in-out infinite;
}

@keyframes blinkStar{
  0%{opacity:0.2; transform:scale(0.9);}
  50%{opacity:0.9; transform:scale(1.2);}
  100%{opacity:0.3; transform:scale(1);}
}

/* ================= EMOJI BACKGROUND ================= */
#emoji-layer{
  position:fixed;
  inset:0;
  z-index:1;
  pointer-events:none;
}

.emoji{
  position:absolute;
  bottom:-40px;
  opacity:0.75;
  animation:floatUp linear forwards;
}

@keyframes floatUp{
  from{transform:translateY(0) scale(0.7); opacity:0;}
  20%{opacity:1;}
  to{transform:translateY(-120vh) scale(1.4); opacity:0;}
}

/* ================= MUSIC BOX ================= */
.music-box{
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  width:92%;
  max-width:560px;
  height:100px;
  background:var(--box-bg);
  backdrop-filter:blur(18px);
  border-radius:28px;
  padding:18px 22px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  z-index:10;
}

.music-left{
  display:flex;
  align-items:center;
  gap:16px;
}

.music-box img{
  width:68px;
  height:68px;
  border-radius:16px;
  object-fit:cover;
}

.music-box button{
  width:54px;
  height:54px;
  border-radius:50%;
  border:none;
  background:var(--accent);
  color:#fff;
  font-size:22px;
  cursor:pointer;
}

.toggle{
  background:none;
  border:none;
  font-size:22px;
  cursor:pointer;
  color:white;
}

/* ================= SECTIONS ================= */
section{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding-top:180px;
  z-index:5;
  position:relative;
}

.card{
  width:92%;
  max-width:560px;
  background:var(--box-bg);
  backdrop-filter:blur(18px);
  padding:50px 40px;
  border-radius:32px;
  text-align:center;
}

.card h1{
  font-size:2.6rem;
  margin-bottom:14px;
}

.card p{
  font-size:1.2rem;
  margin-bottom:30px;
}

.card button{
  padding:16px 38px;
  border-radius:40px;
  border:none;
  background:var(--accent);
  color:#fff;
  font-size:1.1rem;
  cursor:pointer;
}

.message{
  display:none;
  margin-top:30px;
  font-size:1.3rem;
}

/* ================= GIF SLIDER ================= */
.gif-section{
  flex-direction:column;
  padding:70px 0 120px;
}

.gif-slider-container{
  width:94%;
  max-width:620px;
  overflow:hidden;
}

.gif-slider{
  display:flex;
  transition:transform 1s ease;
}

.gif-slider img{
  width:100%;
  height:380px;
  object-fit:cover;
  border-radius:34px;
  flex-shrink:0;
  opacity:0.45;
  transform:scale(0.9);
  transition:all 1s ease;
}

.gif-slider img.active{
  opacity:1;
  transform:scale(1);
}

/* ================= CURSOR MUSIC HEART ================= */
.cursor-heart{
  position:fixed;
  pointer-events:none;
  z-index:3;
  opacity:0.85;
  animation:heartFade 1.6s ease-out forwards;
}

@keyframes heartFade{
  from{transform:scale(0.8); opacity:0.9;}
  to{transform:scale(2); opacity:0;}
}

/* ================= MOBILE ================= */
@media(max-width:600px){
  .gif-slider img{height:260px;}
  .card h1{font-size:2.2rem;}
}
</style>
</head>

<body>

<div id="stars"></div>
<div id="emoji-layer"></div>

<!-- MUSIC -->
<div class="music-box">
  <div class="music-left">
    <img src="songcover.jpg">
    <button onclick="togglePlay()" id="playBtn">‚ñ∂</button>
  </div>
  <button class="toggle" onclick="toggleTheme()" id="themeBtn">üåô</button>
</div>

<!-- WISH -->
<section>
  <div class="card">
    <h1>Happy New Year üíñ</h1>
    <p>To the one who makes my heart feel safe & loved ‚ú®</p>
    <button onclick="showLove()">Open my wish üíå</button>
    <div class="message" id="loveMsg"></div>
  </div>
</section>

<!-- GIFS -->
<section class="gif-section">
  <h2>Us, in little moments üíï</h2>
  <div class="gif-slider-container">
    <div class="gif-slider" id="gifSlider"></div>
  </div>
</section>

<audio id="loveSong">
  <source src="Dooron.mp3" type="audio/mpeg">
</audio>

<script>
/* ================= DATA ================= */
const DATA={
  songStart:60,
  wishes:[
    "I choose you ‚Äî always üíñ",
    "You feel like home üè°üíï",
    "With you, love feels gentle ‚ú®",
    "Another year, still us üíò"
  ],
  gifs:["gif3.gif","gif2.gif","gif5.gif","gif6.gif","gif4.gif","gif7.gif"],
  emojis:["üíñ","üíï","üíò","üå∏","‚ú®","üíó","ü¶ã"]
};

/* ================= STARS ================= */
const stars=document.getElementById("stars");
for(let i=0;i<80;i++){
  const s=document.createElement("div");
  s.className="star";
  s.style.left=Math.random()*100+"vw";
  s.style.top=Math.random()*100+"vh";
  s.style.animationDuration=(4+Math.random()*6)+"s";
  s.style.animationDelay=Math.random()*5+"s";
  stars.appendChild(s);
}

/* ================= AUTO NIGHT ================= */
setTimeout(()=>{
  document.body.classList.add("night");
  document.getElementById("themeBtn").innerText="‚òÄÔ∏è";
},6000);

/* ================= AUDIO + EMOJIS ================= */
const audio=document.getElementById("loveSong");
const playBtn=document.getElementById("playBtn");
const emojiLayer=document.getElementById("emoji-layer");
let emojiInterval=null;

function togglePlay(){
  if(audio.paused){
    audio.currentTime=DATA.songStart;
    audio.volume=0.8;
    audio.play();
    playBtn.innerHTML="‚è∏";
    startEmojis();
    musicActive=true;
  }else{
    audio.pause();
    playBtn.innerHTML="‚ñ∂";
    stopEmojis();
    musicActive=false;
  }
}

function startEmojis(){
  if(emojiInterval) return;
  emojiInterval=setInterval(()=>{
    const e=document.createElement("div");
    e.className="emoji";
    e.innerText=DATA.emojis[Math.floor(Math.random()*DATA.emojis.length)];
    e.style.left=Math.random()*100+"vw";
    e.style.fontSize=(24+Math.random()*24)+"px";
    e.style.animationDuration=(9+Math.random()*6)+"s";
    emojiLayer.appendChild(e);
    setTimeout(()=>e.remove(),16000);
  },700);
}

function stopEmojis(){
  clearInterval(emojiInterval);
  emojiInterval=null;
}

/* ================= WISH ================= */
function showLove(){
  const msg=DATA.wishes[Math.floor(Math.random()*DATA.wishes.length)];
  document.getElementById("loveMsg").innerText=msg;
  document.getElementById("loveMsg").style.display="block";
}

/* ================= GIF SLIDER ================= */
const gifSlider=document.getElementById("gifSlider");
let gifIndex=0;

DATA.gifs.forEach(src=>{
  const img=document.createElement("img");
  img.src=src;
  gifSlider.appendChild(img);
});

const gifs=document.querySelectorAll(".gif-slider img");

function updateGif(){
  gifSlider.style.transform=`translateX(-${gifIndex*100}%)`;
  gifs.forEach((g,i)=>g.classList.toggle("active",i===gifIndex));
}
setInterval(()=>{gifIndex=(gifIndex+1)%gifs.length;updateGif();},4500);
updateGif();

/* ================= NIGHT TOGGLE ================= */
function toggleTheme(){
  document.body.classList.toggle("night");
  document.getElementById("themeBtn").innerText=
    document.body.classList.contains("night") ? "‚òÄÔ∏è" : "üåô";
}

/* ================= MUSIC SYNC CURSOR HEART ================= */
let cursorX=innerWidth/2, cursorY=innerHeight/2;
let musicActive=false;

document.addEventListener("mousemove",e=>{cursorX=e.clientX;cursorY=e.clientY;});
document.addEventListener("touchmove",e=>{
  const t=e.touches[0];
  cursorX=t.clientX; cursorY=t.clientY;
});

const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
const src=audioCtx.createMediaElementSource(audio);
const analyser=audioCtx.createAnalyser();
src.connect(analyser);
analyser.connect(audioCtx.destination);
analyser.fftSize=256;
const dataArray=new Uint8Array(analyser.frequencyBinCount);

document.addEventListener("click",()=>{
  if(audioCtx.state==="suspended") audioCtx.resume();
});

setInterval(()=>{
  if(!musicActive) return;
  analyser.getByteFrequencyData(dataArray);
  const energy=dataArray.reduce((a,b)=>a+b,0)/dataArray.length;
  if(energy>90){
    const h=document.createElement("div");
    h.className="cursor-heart";
    h.innerText="üíó";
    h.style.left=cursorX+"px";
    h.style.top=cursorY+"px";
    h.style.fontSize=(16+energy/6)+"px";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),1600);
  }
},120);
</script>

</body>
</html>

